{% extends "base.html" %}
{% block title %}{{ thread.title }} - The Commons{% endblock %}

{% block content %}
<div class="container py-5">
  <h2 class="text-gradient mb-4">{{ thread.title }}</h2>
  <p class="text-muted">In <a href="{% url 'community:board_detail' thread.board.slug %}">{{ thread.board.name }}</a></p>
  <hr>

  {% for post in posts %}
    <div class="mb-4 p-3 bg-dark text-white rounded">
      <div class="d-flex justify-content-between">
        <strong>{{ post.author.username }}</strong>
        <small class="text-muted">{{ post.created_at|date:"F j, Y H:i" }}</small>
      </div>
      <div class="mt-2">
        {{ post.body|linebreaks }}
      </div>
    </div>
  {% empty %}
    <p>No replies yet. Add the first one below!</p>
  {% endfor %}

  {% if user.is_authenticated %}
  <form method="post" class="mt-5">
    {% csrf_token %}
    <div class="mb-3">
      <textarea name="body" rows="4" class="form-control" placeholder="Write your reply..."></textarea>
    </div>
    <button class="btn btn-primary" type="submit"><i class="fas fa-reply"></i> Post Reply</button>
  </form>
  {% else %}
  <p>Please <a href="{% url 'users:login' %}">log in</a> to reply.</p>
  {% endif %}
</div>
{% endblock %}
